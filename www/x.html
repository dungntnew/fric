<!doctype html>
<html lang="en">
<head>
 <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
   
  <meta charset="UTF-8">
  <title>Example - example-example23-production</title>
  
  <script src="lib/jquery/dist/jquery.min.js"></script>
   <script src="lib/fabric.js/dist/fabric.js"></script>

  

  
</head>
<body ng-app="docsTabsExample">
<center style="position: relative">
<canvas id="c" width="320" height="240" 
style="border: 1px solid green;width:80%; height:80%; color:blue; display:block;"></canvas>
 <div>
 <textarea id="textInput" style="position: absolute;"></textarea>
 </div>
</center>
<script>

var canvas = window._canvas = new fabric.Canvas('c');

// Do some initializing stuff
fabric.Object.prototype.set({
    transparentCorners: false,
    cornerColor: 'rgba(102,153,255,0.5)',
    cornerSize: 12,
    padding: 5
});

var w = canvas.width;
var h = canvas.height;

fabric.Object.prototype.transparentCorners = false;


var texts = [];
var textInput;
var maxLines = 3;
var lineHeight = 80;

var setupTextInput = function(){
    textInput = $('#textInput')[0];
    $(textInput).css({
      'text-align': 'center',
      'font-size': 20,
      'color': 'red',
      'position': 'absoute',
      'z-index': 1000,
      'display': 'none',
      'width': w,
      'height': maxLines * lineHeight,
      'top': canvas.top,
      'left': canvas.left
    });
}
setupTextInput();


var addNewText = function(){
  // create new text object
  var text = new fabric.Text('入力してください！', {
      left: 100,
      top: 100,
      fontSize: 20,
      fill: '#000'
  });
  // push to store
  canvas.add(text);
  texts.push(text);
}

addNewText();

var date = new Date();
var lastTime = date.getTime();
canvas.observe('mouse:down', function(e){

  var date = new Date();
  var now = date.getTime();
  if (now - lastTime < 500){

    if (e.target)
    objectDoubleClickHandler(e);
  }
  lastTime = now;
});


function objectDoubleClickHandler(event){
    console.log("double click...");
    console.log(event.target);

    $(textInput).css({
      'display': 'block'
    })
}





canvas.renderAll();


canvas.renderAll();
</script>
</body>
</html>